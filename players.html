<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ตารางนักเตะ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
</head>
<body>
    <header class="bg-primary text-white text-center py-5">
        <h1>ตารางชื่อนักเตะ</h1>
    </header>

    <main class="container my-5">
        <!-- ปุ่มนำทางไปยังหน้า index.html -->
        <a href="index.html" class="btn btn-secondary mb-3">กลับไปหน้า Index</a>

        <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#addPlayerModal">เพิ่มนักเตะ</button>
        <div class="card">
            <div class="card-header">
                <h4>ข้อมูลนักเตะ</h4>
            </div>
            <div class="card-body">
                <table class="table table-bordered table-striped">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>ชื่อ</th>
                            <th>ตำแหน่ง</th>
                            <th>สโมสร</th>
                            <th>จำนวนประตู</th>
                            <th>จำนวนแอสซิสต์</th>
                            <th>ดูข้อมูลส่วนตัว</th>
                            <th>แก้ไข</th>
                            <th>ลบ</th>
                        </tr>
                    </thead>
                    <tbody id="playerTable"></tbody>
                </table>
            </div>
        </div>
    </main>

    <!-- Modal เพิ่มนักเตะ -->
    <div class="modal fade" id="addPlayerModal" tabindex="-1" aria-labelledby="addPlayerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addPlayerModalLabel">เพิ่มหรือแก้ไขนักเตะ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addPlayerForm">
                        <div class="mb-3">
                            <label for="addName" class="form-label">ชื่อ</label>
                            <input type="text" class="form-control" id="addName" placeholder="กรอกชื่อ">
                        </div>
                        <div class="mb-3">
                            <label for="addPosition" class="form-label">ตำแหน่ง</label>
                            <select class="form-select" id="addPosition">
                                <option value="Forward">Forward</option>
                                <option value="Midfielder">Midfielder</option>
                                <option value="Defender">Defender</option>
                                <option value="Goalkeeper">Goalkeeper</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="addClub" class="form-label">สโมสร</label>
                            <input type="text" class="form-control" id="addClub" placeholder="กรอกชื่อสโมสร">
                        </div>
                        <div class="mb-3">
                            <label for="addGoals" class="form-label">จำนวนประตู</label>
                            <input type="number" class="form-control" id="addGoals" placeholder="กรอกจำนวนประตู">
                        </div>
                        <div class="mb-3">
                            <label for="addAssists" class="form-label">จำนวนแอสซิสต์</label>
                            <input type="number" class="form-control" id="addAssists" placeholder="กรอกจำนวนแอสซิสต์">
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ยกเลิก</button>
                    <button type="button" class="btn btn-primary" onclick="savePlayer()">บันทึกข้อมูล</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal ดูข้อมูลนักเตะ -->
    <div class="modal fade" id="viewPlayerModal" tabindex="-1" aria-labelledby="viewPlayerModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="viewPlayerModalLabel">ข้อมูลนักเตะ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="playerInfo">
                    <!-- ข้อมูลนักเตะจะแสดงที่นี่ -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">ปิด</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
    <script>
        let players = JSON.parse(localStorage.getItem('players')) || [];
        let currentPlayerId = null;

        function renderTable() {
            const playerTable = document.getElementById('playerTable');
            playerTable.innerHTML = '';
            players.forEach((player, index) => {
                playerTable.innerHTML += `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${player.name}</td>
                        <td>${player.position}</td>
                        <td>${player.club}</td>
                        <td>${player.goals}</td>
                        <td>${player.assists}</td>
                        <td><button class="btn btn-info btn-sm" onclick="viewPlayer(${index})">ดูข้อมูล</button></td>
                        <td><button class="btn btn-warning btn-sm" onclick="editPlayer(${index})">แก้ไข</button></td>
                        <td><button class="btn btn-danger btn-sm" onclick="deletePlayer(${index})">ลบ</button></td>
                    </tr>
                `;
            });
        }

        function savePlayer() {
            const name = document.getElementById('addName').value;
            const position = document.getElementById('addPosition').value;
            const club = document.getElementById('addClub').value;
            const goals = document.getElementById('addGoals').value;
            const assists = document.getElementById('addAssists').value;

            if (!name || !position || !club || !goals || !assists) {
                alert('กรุณากรอกข้อมูลให้ครบ');
                return;
            }

            if (currentPlayerId !== null) {
                players[currentPlayerId] = { name, position, club, goals, assists };
                currentPlayerId = null;
            } else {
                players.push({ name, position, club, goals, assists });
            }

            localStorage.setItem('players', JSON.stringify(players));
            const modal = bootstrap.Modal.getInstance(document.getElementById('addPlayerModal'));
            modal.hide();
            renderTable();
            document.getElementById('addPlayerForm').reset();
        }

        function editPlayer(index) {
            currentPlayerId = index;
            const player = players[index];
            document.getElementById('addName').value = player.name;
            document.getElementById('addPosition').value = player.position;
            document.getElementById('addClub').value = player.club;
            document.getElementById('addGoals').value = player.goals;
            document.getElementById('addAssists').value = player.assists;

            const modal = new bootstrap.Modal(document.getElementById('addPlayerModal'));
            modal.show();
        }

        function deletePlayer(index) {
            if (confirm('คุณต้องการลบข้อมูลนักเตะนี้หรือไม่?')) {
                players.splice(index, 1);
                localStorage.setItem('players', JSON.stringify(players));
                renderTable();
            }
        }

        function viewPlayer(index) {
            const player = players[index];
            const playerInfo = document.getElementById('playerInfo');
            playerInfo.innerHTML = `
                <p><strong>ชื่อ:</strong> ${player.name}</p>
                <p><strong>ตำแหน่ง:</strong> ${player.position}</p>
                <p><strong>สโมสร:</strong> ${player.club}</p>
                <p><strong>จำนวนประตู:</strong> ${player.goals}</p>
                <p><strong>จำนวนแอสซิสต์:</strong> ${player.assists}</p>
            `;
            const modal = new bootstrap.Modal(document.getElementById('viewPlayerModal'));
            modal.show();
        }

        window.onload = renderTable;
    </script>
</body>
</html>
